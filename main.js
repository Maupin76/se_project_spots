!function(){"use strict";var e="";const t={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-button",inactiveButtonClass:"modal__submit-button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error"},o=(e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)},r=(e,t,o)=>{const r=e.querySelector(`#${t.id}-error`);t.classList.remove(o.inputErrorClass),r.classList.remove(o.errorClass),r.textContent=""};var n=e+"80804e27ce061efd1ffb.svg",c=e+"2fc47fd8e9a9bcd9612f.jpg",a=e+"3f562ce83766a824571e.svg",s=e+"975792ea68af0a3c209d.svg";document.querySelector(".header__logo").src=n,document.querySelector(".profile__avatar").src=c,document.querySelector(".profile__edit-button-icon").src=a,document.querySelector(".profile__new-post-plus-icon").src=s;const l=document.querySelector(".profile__edit-button"),i=document.querySelector(".profile__new-post-button"),d=document.querySelector("#edit-profile-modal"),u=document.querySelector("#add-card-modal"),m=document.querySelector("#preview-modal"),p=d.querySelector(".modal__close-button"),_=u.querySelector(".modal__close-button"),f=m.querySelector(".modal__close_type_preview"),y=u.querySelector(".modal__submit-button"),v=m.querySelector(".modal__image"),S=m.querySelector(".modal__caption"),b=document.querySelector(".profile__name"),q=document.querySelector(".profile__description"),g=document.forms["edit-profile"],h=document.forms["add-card"],w=document.querySelector("#name"),k=document.querySelector("#description"),E=document.querySelector("#link"),L=document.querySelector("#caption"),C=document.querySelector("#card-template").content,x=document.querySelector(".cards__list");function A(e){if("Escape"===e.key){const e=document.querySelector(".modal_opened");e&&(document.activeElement.blur(),j(e))}}function z(e){e.classList.add("modal_opened"),document.addEventListener("keydown",A)}function j(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",A)}function B(e){const t=C.cloneNode(!0),o=t.querySelector(".card"),r=t.querySelector(".card__img"),n=t.querySelector(".card__title"),c=t.querySelector(".card__like-button"),a=t.querySelector(".card__delete-button");return r.src=e.link,r.alt=e.name,n.textContent=e.name,c.addEventListener("click",(()=>{c.classList.toggle("card__like-button_liked")})),a.setAttribute("aria-label","Delete card"),a.addEventListener("click",(()=>{o.remove()})),r.addEventListener("click",(()=>{v.src=e.link,v.alt=e.name,S.textContent=e.name,z(m)})),t}p.addEventListener("click",(()=>{j(d)})),_.addEventListener("click",(()=>{j(u)})),f.addEventListener("click",(()=>{j(m)})),document.querySelectorAll(".modal").forEach((e=>{e.addEventListener("mousedown",(t=>{t.target===e&&j(e)}))})),l.addEventListener("click",(()=>{w.value=b.textContent,k.value=q.textContent,((e,t)=>{const n=Array.from(e.querySelectorAll(t.inputSelector)),c=e.querySelector(t.submitButtonSelector);n.forEach((o=>{r(e,o,t)})),o(c,t)})(g,t),z(d)})),i.addEventListener("click",(()=>{z(u)})),i.addEventListener("click",(()=>z(u))),g.addEventListener("submit",(e=>{e.preventDefault(),b.textContent=w.value,q.textContent=k.value,j(d);const r=g.querySelector(".modal__submit-button");o(r,t)})),h.addEventListener("submit",(e=>{e.preventDefault();const r={name:L.value,link:E.value};x.prepend(B(r)),j(u),h.reset(),o(y,t)})),[{name:"Val Thorens",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/1-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Restaurant terrace",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/2-photo-by-ceiline-from-pexels.jpg"},{name:"An outdoor cafe",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg"},{name:"A very long bridge, over the forest and through the trees",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg"},{name:"Tunnel with morning light",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg"},{name:"Mountain house",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Landscape Test",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/7-photo-by-griffin-wooldridge-from-pexels.jpg"}].forEach((e=>x.append(B(e)))),(e=>{Array.from(document.querySelectorAll(e.formSelector)).forEach((t=>{((e,t)=>{const n=Array.from(e.querySelectorAll(t.inputSelector)),c=e.querySelector(t.submitButtonSelector),a=(e,t,r)=>{(e=>e.some((e=>!e.validity.valid)))(e)?o(t,r):(t.disabled=!1,t.classList.remove(r.inactiveButtonClass))};a(n,c,t),e.addEventListener("reset",(()=>{o(c,t)})),n.forEach((o=>{o.addEventListener("input",(()=>{((e,t,o)=>{t.validity.valid?r(e,t,o):((e,t,o,r)=>{const n=e.querySelector(`#${t.id}-error`);t.classList.add(r.inputErrorClass),n.classList.add(r.errorClass),n.textContent=o})(e,t,t.validationMessage,o)})(e,o,t),a(n,c,t)}))}))})(t,e)}))})(t)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFjQyxFQUFlUixFQUFTLElBR3hDaUYsRUFBVUwsU0FBUzdELElBQ2pCQSxFQUFhNEMsaUJBQWlCLFNBQVMsS0F4RGhCcUMsRUFBQ2xGLEVBQWFDLEVBQWNmLEtBQ2hEZSxFQUFhOEUsU0FBU0MsTUFRekJqRixFQUFlQyxFQUFhQyxFQUFjZixHQTNCdkJpRyxFQUFDbkYsRUFBYUMsRUFBY21GLEVBQWNsRyxLQUMvRCxNQUFNbUcsRUFBa0JyRixFQUFZRyxjQUNsQyxJQUFJRixFQUFhRyxZQUVuQkgsRUFBYUosVUFBVUMsSUFBSVosRUFBU0ssaUJBQ3BDOEYsRUFBZ0J4RixVQUFVQyxJQUFJWixFQUFTTSxZQUN2QzZGLEVBQWdCL0UsWUFBYzhFLENBQVksRUFjeENELENBQ0VuRixFQUNBQyxFQUNBQSxFQUFhcUYsa0JBQ2JwRyxFQUlKLEVBK0NJZ0csQ0FBbUJsRixFQUFhQyxFQUFjZixHQUM5QzJGLEVBQWtCVixFQUFXekUsRUFBZVIsRUFBUyxHQUNyRCxHQUNGLEVBTUEwRixDQUFrQjVFLEVBQWFkLEVBQVMsR0FDeEMsRUNxR0pxRyxDQUFpQnJHLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9zY3JpcHRzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCJleHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3N1Ym1pdC1idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvclwiLFxyXG59O1xyXG5cclxuLy8gRGlzYWJsZSBhIHN1Ym1pdCBidXR0b24gYW5kIGFwcGx5IHN0eWxpbmdcclxuZXhwb3J0IGNvbnN0IGRpc2FibGVCdXR0b24gPSAoYnV0dG9uRWxlbWVudCwgY29uZmlnKSA9PiB7XHJcbiAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxufTtcclxuXHJcbi8vIFNob3cgZXJyb3IgbWVzc2FnZSBmb3IgYSBzcGVjaWZpYyBpbnB1dFxyXG5jb25zdCBzaG93SW5wdXRFcnJvciA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UsIHNldHRpbmdzKSA9PiB7XHJcbiAgY29uc3QgZXJyb3JNc2dFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICk7XHJcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcclxuICBlcnJvck1zZ0VsZW1lbnQuY2xhc3NMaXN0LmFkZChzZXR0aW5ncy5lcnJvckNsYXNzKTtcclxuICBlcnJvck1zZ0VsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbn07XHJcblxyXG4vLyBIaWRlIGVycm9yIG1lc3NhZ2UgZm9yIGEgc3BlY2lmaWMgaW5wdXRcclxuY29uc3QgaGlkZUlucHV0RXJyb3IgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgc2V0dGluZ3MpID0+IHtcclxuICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcclxuICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShzZXR0aW5ncy5lcnJvckNsYXNzKTtcclxuICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG59O1xyXG5cclxuLy8gQ2hlY2sgaWYgYSBzcGVjaWZpYyBpbnB1dCBpcyB2YWxpZFxyXG5jb25zdCBjaGVja0lucHV0VmFsaWRpdHkgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgc2V0dGluZ3MpID0+IHtcclxuICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgc2hvd0lucHV0RXJyb3IoXHJcbiAgICAgIGZvcm1FbGVtZW50LFxyXG4gICAgICBpbnB1dEVsZW1lbnQsXHJcbiAgICAgIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSxcclxuICAgICAgc2V0dGluZ3NcclxuICAgICk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIHNldHRpbmdzKTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBSZXNldCBhbGwgaW5wdXQgZXJyb3JzIGFuZCBkaXNhYmxlIGJ1dHRvblxyXG5leHBvcnQgY29uc3QgcmVzZXRGb3JtU3RhdGUgPSAoZm9ybUVsZW1lbnQsIGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5pbnB1dFNlbGVjdG9yKVxyXG4gICk7XHJcbiAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKTtcclxuICB9KTtcclxuXHJcbiAgZGlzYWJsZUJ1dHRvbihidXR0b25FbGVtZW50LCBjb25maWcpO1xyXG59O1xyXG5cclxuY29uc3Qgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoZm9ybUVsZW1lbnQsIHNldHRpbmdzKSA9PiB7XHJcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgIGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2V0dGluZ3MuaW5wdXRTZWxlY3RvcilcclxuICApO1xyXG4gIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICApO1xyXG5cclxuICBjb25zdCBoYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XHJcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgdG9nZ2xlQnV0dG9uU3RhdGUgPSAoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBzZXR0aW5ncykgPT4ge1xyXG4gICAgaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XHJcbiAgICAgIGRpc2FibGVCdXR0b24oYnV0dG9uRWxlbWVudCwgc2V0dGluZ3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gSW5pdGlhbCBzdGF0ZVxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgc2V0dGluZ3MpO1xyXG5cclxuICBmb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwicmVzZXRcIiwgKCkgPT4ge1xyXG4gICAgZGlzYWJsZUJ1dHRvbihidXR0b25FbGVtZW50LCBzZXR0aW5ncyk7XHJcbiAgfSk7XHJcblxyXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICBjaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgc2V0dGluZ3MpO1xyXG4gICAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIHNldHRpbmdzKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoc2V0dGluZ3MpID0+IHtcclxuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZXR0aW5ncy5mb3JtU2VsZWN0b3IpKTtcclxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsZW1lbnQsIHNldHRpbmdzKTtcclxuICB9KTtcclxufTtcclxuXHJcbi8vIEtpY2sgb2ZmIHZhbGlkYXRpb24gc2V0dXBcclxuLy8gZW5hYmxlVmFsaWRhdGlvbihzZXR0aW5ncyk7XHJcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7IC8vIEltcG9ydCB0aGUgQ1NTIGZpbGUgZm9yIHN0eWxlc1xyXG5pbXBvcnQge1xyXG4gIGVuYWJsZVZhbGlkYXRpb24sXHJcbiAgc2V0dGluZ3MsXHJcbiAgcmVzZXRGb3JtU3RhdGUsXHJcbiAgZGlzYWJsZUJ1dHRvbixcclxufSBmcm9tIFwiLi4vc2NyaXB0cy92YWxpZGF0aW9uLmpzXCI7IC8vIEltcG9ydCB2YWxpZGF0aW9uIGZ1bmN0aW9uc1xyXG5cclxuaW1wb3J0IGxvZ28gZnJvbSBcIi4uL2ltYWdlcy9sb2dvLnN2Z1wiO1xyXG5pbXBvcnQgYXZhdGFyIGZyb20gXCIuLi9pbWFnZXMvYXZhdGFyLmpwZ1wiO1xyXG5pbXBvcnQgcGVuY2lsIGZyb20gXCIuLi9pbWFnZXMvcGVuY2lsLnN2Z1wiO1xyXG5pbXBvcnQgcGx1cyBmcm9tIFwiLi4vaW1hZ2VzL3BsdXMtaWNvbi5zdmdcIjtcclxuXHJcbi8vIEFzc2lnbiBpbWFnZSBzb3VyY2VzXHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX19sb2dvXCIpLnNyYyA9IGxvZ287XHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyXCIpLnNyYyA9IGF2YXRhcjtcclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvbi1pY29uXCIpLnNyYyA9IHBlbmNpbDtcclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uZXctcG9zdC1wbHVzLWljb25cIikuc3JjID0gcGx1cztcclxuXHJcbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbCBUaG9yZW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMS1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlJlc3RhdXJhbnQgdGVycmFjZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzItcGhvdG8tYnktY2VpbGluZS1mcm9tLXBleGVscy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQW4gb3V0ZG9vciBjYWZlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMy1waG90by1ieS10dWJhbnVyLWRvZ2FuLWZyb20tcGV4ZWxzLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJBIHZlcnkgbG9uZyBicmlkZ2UsIG92ZXIgdGhlIGZvcmVzdCBhbmQgdGhyb3VnaCB0aGUgdHJlZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy80LXBob3RvLWJ5LW1hdXJpY2UtbGFzY2hldC1mcm9tLXBleGVscy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVHVubmVsIHdpdGggbW9ybmluZyBsaWdodFwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzUtcGhvdG8tYnktdmFuLWFuaC1uZ3V5ZW4tZnJvbS1wZXhlbHMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIk1vdW50YWluIGhvdXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNi1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhbmRzY2FwZSBUZXN0XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNy1waG90by1ieS1ncmlmZmluLXdvb2xkcmlkZ2UtZnJvbS1wZXhlbHMuanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLSBET00gRWxlbWVudHMgLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbmNvbnN0IG5ld1Bvc3RCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25ldy1wb3N0LWJ1dHRvblwiKTtcclxuXHJcbmNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtcHJvZmlsZS1tb2RhbFwiKTtcclxuY29uc3QgYWRkQ2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbFwiKTtcclxuY29uc3QgcHJldmlld01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LW1vZGFsXCIpO1xyXG5cclxuY29uc3QgY2xvc2VFZGl0UHJvZmlsZU1vZGFsID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLm1vZGFsX19jbG9zZS1idXR0b25cIlxyXG4pO1xyXG5jb25zdCBjbG9zZUNhcmRCdXR0b24gPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCIpO1xyXG5jb25zdCBjbG9zZVByZXZpZXdCdXR0b24gPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcclxuICBcIi5tb2RhbF9fY2xvc2VfdHlwZV9wcmV2aWV3XCJcclxuKTtcclxuXHJcbmNvbnN0IGNhcmRTdWJtaXRCdXR0b24gPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiKTtcclxuXHJcbmNvbnN0IHByZXZpZXdJbWFnZSA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcclxuY29uc3QgcHJldmlld0NhcHRpb24gPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xyXG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xyXG5cclxuY29uc3QgZWRpdFByb2ZpbGVGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJlZGl0LXByb2ZpbGVcIl07XHJcbmNvbnN0IGFkZENhcmRGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJhZGQtY2FyZFwiXTtcclxuXHJcbmNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZVwiKTtcclxuY29uc3QgZGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVzY3JpcHRpb25cIik7XHJcbmNvbnN0IGNhcmRJbWFnZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsaW5rXCIpO1xyXG5jb25zdCBjYXJkQ2FwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXB0aW9uXCIpO1xyXG5cclxuY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpLmNvbnRlbnQ7XHJcbmNvbnN0IGNhcmRzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLSBNb2RhbCBVdGlsaXRpZXMgLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5mdW5jdGlvbiBoYW5kbGVFc2NhcGUoZXZ0KSB7XHJcbiAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgIGNvbnN0IG9wZW5lZFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9vcGVuZWRcIik7XHJcbiAgICBpZiAob3BlbmVkUG9wdXApIHtcclxuICAgICAgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ibHVyKCk7XHJcbiAgICAgIGNsb3NlTW9kYWwob3BlbmVkUG9wdXApO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gb3Blbk1vZGFsKG1vZGFsKSB7XHJcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2NhcGUpOyAvLyBBZGQgZXNjYXBlIGxpc3RlbmVyXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsb3NlTW9kYWwobW9kYWwpIHtcclxuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY2FwZSk7IC8vIFJlbW92ZSBlc2NhcGUgbGlzdGVuZXJcclxufVxyXG5cclxuLy8gQ2xvc2UgdGhlIGVkaXQgcHJvZmlsZSBtb2RhbCB3aGVuIGl0cyBjbG9zZSBidXR0b24gaXMgY2xpY2tlZFxyXG5jbG9zZUVkaXRQcm9maWxlTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjbG9zZU1vZGFsKGVkaXRQcm9maWxlTW9kYWwpO1xyXG59KTtcclxuXHJcbi8vIENsb3NlIHRoZSBhZGQgY2FyZCBtb2RhbCB3aGVuIGl0cyBjbG9zZSBidXR0b24gaXMgY2xpY2tlZFxyXG5jbG9zZUNhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjbG9zZU1vZGFsKGFkZENhcmRNb2RhbCk7XHJcbn0pO1xyXG5cclxuLy8gQ2xvc2UgdGhlIHByZXZpZXcgbW9kYWwgd2hlbiBpdHMgY2xvc2UgYnV0dG9uIGlzIGNsaWNrZWRcclxuY2xvc2VQcmV2aWV3QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY2xvc2VNb2RhbChwcmV2aWV3TW9kYWwpO1xyXG59KTtcclxuXHJcbi8vIENsb3NlIG1vZGFsIGlmIHVzZXIgY2xpY2tzIG9uIHRoZSBvdmVybGF5IChvdXRzaWRlIHRoZSBtb2RhbCBjb250ZW50KVxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsXCIpLmZvckVhY2goKG1vZGFsKSA9PiB7XHJcbiAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZlbnQpID0+IHtcclxuICAgIC8vIE9ubHkgY2xvc2UgaWYgdGhlIHVzZXIgY2xpY2tlZCBkaXJlY3RseSBvbiB0aGUgb3ZlcmxheVxyXG4gICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gbW9kYWwpIHtcclxuICAgICAgY2xvc2VNb2RhbChtb2RhbCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tIEV2ZW50IExpc3RlbmVycyAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgbmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZU5hbWUudGV4dENvbnRlbnQ7XHJcbiAgZGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudDtcclxuICByZXNldEZvcm1TdGF0ZShlZGl0UHJvZmlsZUZvcm0sIHNldHRpbmdzKTsgLy8gUmVzZXQgZXJyb3Igc3RhdGUgYW5kIGRpc2FibGUgYnV0dG9uXHJcbiAgb3Blbk1vZGFsKGVkaXRQcm9maWxlTW9kYWwpO1xyXG59KTtcclxuXHJcbm5ld1Bvc3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBvcGVuTW9kYWwoYWRkQ2FyZE1vZGFsKTtcclxufSk7XHJcblxyXG5uZXdQb3N0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBvcGVuTW9kYWwoYWRkQ2FyZE1vZGFsKSk7XHJcblxyXG5lZGl0UHJvZmlsZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcclxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gbmFtZUlucHV0LnZhbHVlO1xyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uSW5wdXQudmFsdWU7XHJcbiAgY2xvc2VNb2RhbChlZGl0UHJvZmlsZU1vZGFsKTtcclxuXHJcbiAgY29uc3QgYnV0dG9uID0gZWRpdFByb2ZpbGVGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3N1Ym1pdC1idXR0b25cIik7XHJcbiAgZGlzYWJsZUJ1dHRvbihidXR0b24sIHNldHRpbmdzKTsgLy8gRGlzYWJsZSBhZ2FpbiBhZnRlciBzdWJtaXNzaW9uXHJcbn0pO1xyXG5cclxuYWRkQ2FyZEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcclxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGNvbnN0IG5ld0NhcmREYXRhID0ge1xyXG4gICAgbmFtZTogY2FyZENhcHRpb25JbnB1dC52YWx1ZSxcclxuICAgIGxpbms6IGNhcmRJbWFnZUlucHV0LnZhbHVlLFxyXG4gIH07XHJcbiAgY2FyZHNDb250YWluZXIucHJlcGVuZChjcmVhdGVDYXJkRWxlbWVudChuZXdDYXJkRGF0YSkpO1xyXG4gIGNsb3NlTW9kYWwoYWRkQ2FyZE1vZGFsKTtcclxuICBhZGRDYXJkRm9ybS5yZXNldCgpO1xyXG5cclxuICBkaXNhYmxlQnV0dG9uKGNhcmRTdWJtaXRCdXR0b24sIHNldHRpbmdzKTsgLy8gRGlzYWJsZSBhZ2FpbiBhZnRlciBzdWJtaXNzaW9uXHJcbn0pO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tIENhcmQgR2VuZXJhdGlvbiAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmRFbGVtZW50KGRhdGEpIHtcclxuICBjb25zdCBjYXJkID0gY2FyZFRlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcclxuICBjb25zdCBjYXJkUm9vdCA9IGNhcmQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpO1xyXG4gIGNvbnN0IGNhcmRJbWFnZSA9IGNhcmQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWdcIik7XHJcbiAgY29uc3QgY2FyZFRpdGxlID0gY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG4gIGNvbnN0IGNhcmRMaWtlQnV0dG9uID0gY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gIGNvbnN0IGNhcmREZWxldGVCdXR0b24gPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKTtcclxuXHJcbiAgY2FyZEltYWdlLnNyYyA9IGRhdGEubGluaztcclxuICBjYXJkSW1hZ2UuYWx0ID0gZGF0YS5uYW1lO1xyXG4gIGNhcmRUaXRsZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuXHJcbiAgY2FyZExpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGNhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9saWtlZFwiKTtcclxuICB9KTtcclxuXHJcbiAgY2FyZERlbGV0ZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIFwiRGVsZXRlIGNhcmRcIik7XHJcbiAgY2FyZERlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgY2FyZFJvb3QucmVtb3ZlKCk7XHJcbiAgfSk7XHJcblxyXG4gIGNhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgcHJldmlld0ltYWdlLnNyYyA9IGRhdGEubGluaztcclxuICAgIHByZXZpZXdJbWFnZS5hbHQgPSBkYXRhLm5hbWU7XHJcbiAgICBwcmV2aWV3Q2FwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICAgIG9wZW5Nb2RhbChwcmV2aWV3TW9kYWwpO1xyXG4gIH0pO1xyXG5cclxuICByZXR1cm4gY2FyZDtcclxufVxyXG5cclxuaW5pdGlhbENhcmRzLmZvckVhY2goKGNhcmQpID0+IGNhcmRzQ29udGFpbmVyLmFwcGVuZChjcmVhdGVDYXJkRWxlbWVudChjYXJkKSkpO1xyXG5cclxuZW5hYmxlVmFsaWRhdGlvbihzZXR0aW5ncyk7IC8vIEVuYWJsZSB2YWxpZGF0aW9uIGZvciBhbGwgZm9ybXNcclxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJzZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiZGlzYWJsZUJ1dHRvbiIsImJ1dHRvbkVsZW1lbnQiLCJjb25maWciLCJkaXNhYmxlZCIsImNsYXNzTGlzdCIsImFkZCIsImhpZGVJbnB1dEVycm9yIiwiZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvckVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJyZW1vdmUiLCJ0ZXh0Q29udGVudCIsImRvY3VtZW50Iiwic3JjIiwibG9nbyIsImF2YXRhciIsInBlbmNpbCIsInBsdXMiLCJwcm9maWxlRWRpdEJ1dHRvbiIsIm5ld1Bvc3RCdXR0b24iLCJlZGl0UHJvZmlsZU1vZGFsIiwiYWRkQ2FyZE1vZGFsIiwicHJldmlld01vZGFsIiwiY2xvc2VFZGl0UHJvZmlsZU1vZGFsIiwiY2xvc2VDYXJkQnV0dG9uIiwiY2xvc2VQcmV2aWV3QnV0dG9uIiwiY2FyZFN1Ym1pdEJ1dHRvbiIsInByZXZpZXdJbWFnZSIsInByZXZpZXdDYXB0aW9uIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJlZGl0UHJvZmlsZUZvcm0iLCJmb3JtcyIsImFkZENhcmRGb3JtIiwibmFtZUlucHV0IiwiZGVzY3JpcHRpb25JbnB1dCIsImNhcmRJbWFnZUlucHV0IiwiY2FyZENhcHRpb25JbnB1dCIsImNhcmRUZW1wbGF0ZSIsImNvbnRlbnQiLCJjYXJkc0NvbnRhaW5lciIsImhhbmRsZUVzY2FwZSIsImV2dCIsImtleSIsIm9wZW5lZFBvcHVwIiwiYWN0aXZlRWxlbWVudCIsImJsdXIiLCJjbG9zZU1vZGFsIiwib3Blbk1vZGFsIiwibW9kYWwiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNyZWF0ZUNhcmRFbGVtZW50IiwiZGF0YSIsImNhcmQiLCJjbG9uZU5vZGUiLCJjYXJkUm9vdCIsImNhcmRJbWFnZSIsImNhcmRUaXRsZSIsImNhcmRMaWtlQnV0dG9uIiwiY2FyZERlbGV0ZUJ1dHRvbiIsImxpbmsiLCJhbHQiLCJuYW1lIiwidG9nZ2xlIiwic2V0QXR0cmlidXRlIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJldmVudCIsInRhcmdldCIsInZhbHVlIiwicmVzZXRGb3JtU3RhdGUiLCJpbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJwcmV2ZW50RGVmYXVsdCIsImJ1dHRvbiIsIm5ld0NhcmREYXRhIiwicHJlcGVuZCIsInJlc2V0IiwiYXBwZW5kIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiaGFzSW52YWxpZElucHV0IiwiY2hlY2tJbnB1dFZhbGlkaXR5Iiwic2hvd0lucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJlcnJvck1zZ0VsZW1lbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9